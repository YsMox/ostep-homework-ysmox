### Answer

> 5:100，指的是这个进程有 5 条指令，每条指令有 100% 几率为 CPU 指令。
> 10:50，指的是这个进程有 10 条指令，每条指令有 50% 几率为 CPU 指令，剩下的 50% 几率为 I/O 指令。
> 缺省情况下，完成一个 I/O 指令需要 5 个周期。

Q: 用以下标志运行程序：./process-run.py -l 5:100,5:100。CPU利用率（CPU使用时间的百分比）应该是多少？为什么你知道这一点？利用 -c标记查看你的答案是否正确。  
A: 100。根据 README.md 的介绍可知，每条指令都是 100% 几率为 CPU 指令。所以一共会运行 10 个 CPU 周期。

Q: 现在用这些标志运行：./process-run.py -l 4:100,1:0。这些标志指定了一个包含4条指令的进程（都要使用CPU），并且只是简单地发出I/O并等待它完成。完成这两个进程需要多长时间？利用-c检查你的答案是否正确。  
A: 9+1。第一个进程的 4 个 CPU 指令需要 4 个周期，第二个进程的 1 个 I/O 指令 需要 5 个周期（一个 CPU、四个 IOs）。
> 本题存在 bug。README.md 里的例子里，最后一个操作为 IO 的话，会多一个 'DONE' 的周期，而这个周期不需要 占用CPU。而 process-run.py 里运行例子会出现和题干中不一样的结果。综合多个例子来看，一个 IO 指令应该是占用 1 个周期的 CPU 和 4 个周期的 IOs。即总共需要 5 个周期。
> 所以如果最后完成的是 IO 指令，那么就写成 X+1 的形式。下面不再赘述。

Q: 现在交换进程的顺序：./process-run.py -l 1:0,4:100。现在发生了什么？交换顺序是否重要？为什么？同样，用-c看看你的答案是否正确。
A: 一共花费了5+1。与上一题相比总得运行时间缩短了。在进程一等待 I/O 时，OS 便切换到进程二，将 CPU 交给了进程二。当进程二运行完毕后，又回到进程一。充分利用了进程一等待 I/O 的时间。

Q: 现在探索另一些标志。一个重要的标志是-S，它决定了当进程发出I/O时系统如何反应。将标志设置为SWITCH_ON_END，在进程进行I/O操作时，系统将不会切换到另一个进程，而是等待进程完成。当你运行以下两个进程时，会发生什么情况？一个执行I/O，另一个执行CPU工作。（-l1:0,4:100 -c -S SWITCH_ON_END）
A: 一共花费了9。当进程执行 I/O 指令时，并不会切换到下一个进程，而是直到当前进程的 I/O 指令完成。

Q: 现在，运行相同的进程，但切换行为设置，在等待I/O时切换到另一个进程（-l 1:0,4:100 -c -SSWITCH_ON_IO）。现在会发生什么？利用-c来确认你的答案是否正确。
A: 和第三题一样的。即这个 py 程序默认是 `SWITCH_ON_IO` 模式。

Q: 另一个重要的行为是I/O完成时要做什么。利用-I IO_RUN_LATER，当I/O完成时，发出它的进程不一定马上运行。相反，当时运行的进程一直运行。当你运行这个进程组合时会发生什么？（./process-run.py -l 3:0,5:100,5:100,5:100 -S SWITCH_ON_IO -I IO_RUN_LATER -c -p）系统资源是否被有效利用？
A: 和 py 程序默认的情况一致，系统资源没有得到有效地利用。

Q: 现在运行相同的进程，但使用-I IO_RUN_IMMEDIATE设置，该设置立即运行发出I/O的进程。这种行为有何不同？为什么运行一个刚刚完成I/O的进程会是一个好主意？
A: 当发出 I/O 指令的进程完成时，立即运行该进程。如果当该进程只有一个 I/O 指令时，并无差别。但是当 该进程有多个 I/O 指令时，可以节省时间。因为大多数情况下，发出 I/O 指令的进程，往往会发出多个。而当其他的进程都运行完毕之后，才回到 I/O 指令的进程，那么也许这个进程还有很多个 I/O 指令要完成，那就得额外多等一段时间了。

Q: 现在运行一些随机生成的进程，例如-s 1 -l 3:50,3:50, -s 2 -l 3:50,3:50, -s 3 -l 3:50,3:50。看看你是否能预测追踪记录会如何变化？当你使用-I IO_RUN_IMMEDIATE与-I IO_RUN_LATER时会发生什么？当你使用-S SWITCH_ON_IO与-S SWITCH_ON_END时会发生什么？
A: 当处于 `SWITCH_ON_END` 时，设置 `IO_RUN_IMMEDIATE` 与 `IO_RUN_LATER` 都是无效的。当进程数更多的时候，`-I IO_RUN_IMMEDIATE -S SWITCH_ON_IO` 是最佳的，时间效率最高。